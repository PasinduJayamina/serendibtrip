@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700;800&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   DESIGN TOKENS — SerendibTrip Design System
   ============================================ */

:root {
  /* ---- Surface Colors ---- */
  --color-bg-primary: #FDFBF7;
  --color-bg-secondary: #FFFFFF;
  --color-bg-elevated: #FFFFFF;
  --color-bg-sunken: #F5F1EB;
  --color-bg-overlay: rgba(27, 58, 75, 0.4);

  /* ---- Text Colors ---- */
  --color-text-primary: #1B3A4B;
  --color-text-secondary: #5A7184;
  --color-text-muted: #8A9BAA;
  --color-text-inverse: #FFFFFF;

  /* ---- Brand Colors ---- */
  --color-brand-primary: #E8A838;
  --color-brand-primary-hover: #D69727;
  --color-brand-accent: #D4553A;
  --color-brand-accent-hover: #C2482F;
  --color-brand-ocean: #1B3A4B;

  /* ---- Semantic Colors ---- */
  --color-success: #38A169;
  --color-warning: #E8A838;
  --color-error: #D4553A;
  --color-info: #3182CE;

  /* ---- Border ---- */
  --color-border: #E8E2D9;
  --color-border-hover: #DBCDBA;
  --color-border-focus: #1B3A4B;

  /* ---- Spacing (8pt grid) ---- */
  --space-0: 0;
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem; /* 8px */
  --space-3: 0.75rem; /* 12px */
  --space-4: 1rem; /* 16px */
  --space-5: 1.25rem; /* 20px */
  --space-6: 1.5rem; /* 24px */
  --space-8: 2rem; /* 32px */
  --space-10: 2.5rem; /* 40px */
  --space-12: 3rem; /* 48px */
  --space-16: 4rem; /* 64px */

  /* ---- Typography (fluid clamp scale) ---- */
  --text-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.8125rem);
  --text-sm: clamp(0.8125rem, 0.775rem + 0.2vw, 0.875rem);
  --text-base: clamp(0.875rem, 0.825rem + 0.25vw, 1rem);
  --text-lg: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
  --text-xl: clamp(1.125rem, 1.05rem + 0.375vw, 1.25rem);
  --text-2xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.75rem);
  --text-3xl: clamp(1.5rem, 1.25rem + 1.25vw, 2.25rem);
  --text-4xl: clamp(1.875rem, 1.5rem + 1.875vw, 3rem);

  /* ---- Elevation / Shadows (Warm Tint) ---- */
  --shadow-xs: 0 1px 2px rgba(27, 58, 75, 0.04);
  --shadow-sm: 0 1px 3px rgba(27, 58, 75, 0.06), 0 1px 2px rgba(27, 58, 75, 0.04);
  --shadow-md: 0 4px 6px rgba(27, 58, 75, 0.05), 0 2px 4px rgba(27, 58, 75, 0.04);
  --shadow-lg: 0 10px 15px rgba(27, 58, 75, 0.07), 0 4px 6px rgba(27, 58, 75, 0.04);
  --shadow-xl: 0 20px 25px rgba(27, 58, 75, 0.08), 0 8px 10px rgba(27, 58, 75, 0.04);
  --shadow-glow-brand: 0 0 20px rgba(232, 168, 56, 0.2);
  --shadow-glow-accent: 0 0 20px rgba(212, 85, 58, 0.2);

  /* ---- Border Radius (MindTrip style) ---- */
  --radius-sm: 0.5rem; /* 8px */
  --radius-md: 0.75rem; /* 12px */
  --radius-lg: 1rem; /* 16px */
  --radius-xl: 1.25rem; /* 20px - Main Cards */
  --radius-2xl: 1.5rem; /* 24px */
  --radius-full: 9999px;

  /* ---- Transitions ---- */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

  /* ---- Nav ---- */
  --nav-height: 5rem;
  --nav-bg: rgba(253, 251, 247, 0.85);
  --nav-blur: blur(16px);

  /* ---- Bottom Tab (mobile) ---- */
  --tab-height: 3.5rem;
  --tab-safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* ============================================
   DARK MODE TOKENS
   ============================================ */

[data-theme="dark"] {
  --color-bg-primary: #0F1419;
  --color-bg-secondary: #1A2332;
  --color-bg-elevated: #212D40;
  --color-bg-sunken: #080A0D;
  --color-bg-overlay: rgba(0, 0, 0, 0.8);

  --color-text-primary: #E8EAED;
  --color-text-secondary: #9BA8B4;
  --color-text-muted: #6B7B8A;
  --color-text-inverse: #0F1419;

  --color-brand-primary: #F5B942;
  --color-brand-primary-hover: #D8A235;
  --color-brand-accent: #E8694F;
  --color-brand-accent-hover: #D15C44;
  --color-brand-ocean: #8CC4E2;

  --color-success: #4ADE80;
  --color-warning: #FBBF24;
  --color-error: #F87171;
  --color-info: #60A5FA;

  --color-border: #2A3A4A;
  --color-border-hover: #374A5E;
  --color-border-focus: #F5B942;

  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.4);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.6);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.7);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.8);
  --shadow-glow-brand: 0 0 20px rgba(245, 185, 66, 0.15);
  --shadow-glow-accent: 0 0 20px rgba(232, 105, 79, 0.15);

  --nav-bg: rgba(15, 20, 25, 0.85);
}

/* ============================================
   BASE STYLES
   ============================================ */

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  padding: 0;
  font-family:
    "Inter",
    system-ui,
    -apple-system,
    sans-serif;
  font-size: var(--text-base);
  color: var(--color-text-primary);
  background: var(--color-bg-primary);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition:
    background-color var(--transition-base),
    color var(--transition-base);
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Outfit", "Inter", sans-serif;
  color: var(--color-text-primary);
}

/* Custom Selection */
::selection {
  background-color: rgba(232, 168, 56, 0.3); /* Warm gold selection */
  color: var(--color-text-primary);
}

[data-theme="dark"] ::selection {
  background-color: rgba(245, 185, 66, 0.3);
}

/* Focus styles — accessible visible focus rings */
:focus-visible {
  outline: 2px solid var(--color-border-focus);
  outline-offset: 2px;
}

/* Respect users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes skeleton-pulse {
  0%,
  100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-slide-in {
  animation: slide-in 0.3s ease-out;
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out;
}

.animate-skeleton {
  animation: skeleton-pulse 1.5s ease-in-out infinite;
  background: linear-gradient(
    90deg,
    var(--color-bg-sunken),
    var(--color-border),
    var(--color-bg-sunken)
  );
  background-size: 200% 100%;
}

/* ============================================
   UTILITY CLASSES (Token-based)
   ============================================ */

/* Card base */
.card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-sm);
  transition:
    box-shadow var(--transition-base),
    border-color var(--transition-base);
}

.card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-border-hover);
}

/* Glass effect for nav + overlays */
.glass {
  background: var(--nav-bg);
  backdrop-filter: var(--nav-blur);
  -webkit-backdrop-filter: var(--nav-blur);
}

/* ============================================
   LEAFLET OVERRIDES
   ============================================ */

.leaflet-container {
  font-family: inherit;
  width: 100% !important;
  height: 100% !important;
}

.leaflet-popup-content-wrapper {
  border-radius: var(--radius-lg) !important;
  box-shadow: var(--shadow-lg) !important;
  background: var(--color-bg-elevated) !important;
  color: var(--color-text-primary) !important;
}

.leaflet-popup-content {
  margin: 12px !important;
}

.leaflet-popup-tip {
  box-shadow: var(--shadow-md) !important;
}

.leaflet-tile-pane {
  z-index: 1;
}

.leaflet-control-container {
  z-index: 800;
}

/* ============================================
   GLOBAL DARK MODE OVERRIDES
   Catches ALL remaining hardcoded Tailwind 
   bg-white / text-gray / border-gray patterns
   across components not yet individually migrated.
   ============================================ */

[data-theme="dark"] {
  /* ---- Backgrounds ---- */
  .bg-white { background-color: var(--color-bg-secondary) !important; }
  .bg-gray-50, .bg-gray-100 { background-color: var(--color-bg-sunken) !important; }
  .bg-sand-50, .from-sand-50 { background-color: var(--color-bg-primary) !important; }

  /* ---- Text Colors ---- */
  .text-gray-900, .text-gray-800 { color: var(--color-text-primary) !important; }
  .text-gray-700, .text-gray-600 { color: var(--color-text-secondary) !important; }
  .text-gray-500, .text-gray-400, .text-gray-300 { color: var(--color-text-muted) !important; }

  /* ---- Borders ---- */
  .border-gray-100, .border-gray-200, .border-gray-300 { border-color: var(--color-border) !important; }
  .divide-gray-100 > * + *, .divide-gray-200 > * + * { border-color: var(--color-border) !important; }

  /* ---- Form Inputs ---- */
  input, textarea, select {
    background-color: var(--color-bg-secondary) !important;
    color: var(--color-text-primary) !important;
    border-color: var(--color-border) !important;
  }
  input::placeholder, textarea::placeholder {
    color: var(--color-text-muted) !important;
  }
  input:focus, textarea:focus, select:focus {
    border-color: var(--color-border-focus) !important;
  }

  /* ---- Hover states ---- */
  .hover\:bg-gray-50:hover, .hover\:bg-gray-100:hover { background-color: var(--color-bg-sunken) !important; }
  .hover\:text-gray-900:hover { color: var(--color-text-primary) !important; }

  /* ---- Shadows ---- */
  .shadow-sm { box-shadow: var(--shadow-sm) !important; }
  .shadow-md { box-shadow: var(--shadow-md) !important; }
  .shadow-lg { box-shadow: var(--shadow-lg) !important; }
  .shadow-xl { box-shadow: var(--shadow-xl) !important; }

  /* ---- Specific component patterns ---- */
  /* Trip planner form inner card */
  .bg-gradient-to-b.from-white { background: var(--color-bg-secondary) !important; }
  
  /* Budget cards */
  .bg-green-50, .bg-emerald-50 { background-color: rgba(63, 185, 124, 0.1) !important; }
  .bg-blue-50, .bg-cyan-50 { background-color: rgba(88, 180, 209, 0.1) !important; }
  .bg-yellow-50, .bg-amber-50 { background-color: rgba(210, 153, 34, 0.1) !important; }
  .bg-red-50, .bg-rose-50 { background-color: rgba(248, 81, 73, 0.1) !important; }
  .bg-purple-50 { background-color: rgba(139, 92, 246, 0.1) !important; }
  .bg-orange-50 { background-color: rgba(245, 158, 11, 0.1) !important; }
  .bg-indigo-50 { background-color: rgba(99, 102, 241, 0.1) !important; }
  .bg-teal-50 { background-color: rgba(20, 184, 166, 0.1) !important; }
  .bg-pink-50 { background-color: rgba(236, 72, 153, 0.1) !important; }

  /* Colored text in dark mode — slightly brighten */
  .text-green-700, .text-emerald-700 { color: #3FB97C !important; }
  .text-green-600, .text-emerald-600 { color: #4ADE80 !important; }
  .text-blue-700, .text-blue-600 { color: #58A6FF !important; }
  .text-amber-700, .text-amber-600 { color: #D29922 !important; }
  .text-red-700, .text-red-600 { color: #F85149 !important; }
  .text-purple-700, .text-purple-600 { color: #A78BFA !important; }
  .text-orange-700, .text-orange-600 { color: #FB923C !important; }
  .text-teal-700, .text-teal-600 { color: #2DD4BF !important; }

  /* ---- Secondary/Accent gradient buttons — keep as-is (look good in dark) ---- */
  
  /* Ring colors */
  .ring-gray-200, .ring-gray-300 { --tw-ring-color: var(--color-border) !important; }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  ::-webkit-scrollbar-track {
    background: var(--color-bg-sunken);
  }
  ::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 4px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-border-hover);
  }

  /* Leaflet dark tiles overlay */
  .leaflet-tile-pane {
    filter: brightness(0.7) contrast(1.1) saturate(0.8);
  }
  .leaflet-popup-tip {
    background: var(--color-bg-elevated) !important;
  }

  /* Stat cards and bordered cards in grids */
  .bg-white.rounded-xl,
  .bg-white.rounded-2xl { 
    background-color: var(--color-bg-secondary) !important;
    border-color: var(--color-border) !important;
  }

  /* Gradient backgrounds that use -from-gray prefixes */
  .from-gray-50, .from-gray-100 { --tw-gradient-from: var(--color-bg-sunken) !important; }
  .to-gray-100, .to-gray-50 { --tw-gradient-to: var(--color-bg-sunken) !important; }
  .via-white { --tw-gradient-via: var(--color-bg-primary) !important; }
}
